/***@authormrdoob/http://mrdoob.com/*@authorjetienne/http://jetienne.com/*@authorpaulirish/http://paulirish.com/*/varMemoryStats=function(){	varmsMin	=100;	varmsMax	=0;	varcontainer	=document.createElement('div');	container.id	='stats';	container.style.cssText='width:80px;opacity:0.9;cursor:pointer';	varmsDiv	=document.createElement('div');	msDiv.id	='ms';	msDiv.style.cssText='padding:003px3px;text-align:left;background-color:#020;';	container.appendChild(msDiv);	varmsText	=document.createElement('div');	msText.id	='msText';	msText.style.cssText='color:#0f0;font-family:Helvetica,Arial,sans-serif;font-size:9px;font-weight:bold;line-height:15px';	msText.innerHTML='Memory';	msDiv.appendChild(msText);	varmsGraph	=document.createElement('div');	msGraph.id	='msGraph';	msGraph.style.cssText='position:relative;width:74px;height:30px;background-color:#0f0';	msDiv.appendChild(msGraph);	while(msGraph.children.length<74){		varbar=document.createElement('span');		bar.style.cssText='width:1px;height:30px;float:left;background-color:#131';		msGraph.appendChild(bar);	}	varupdateGraph=function(dom,height,color){		varchild=dom.appendChild(dom.firstChild);		child.style.height=height+'px';		if(color)child.style.backgroundColor=color;	}	varperf=window.performance||{};	//polyfillusedJSHeapSize	if(!perf.memory){		perf.memory={usedJSHeapSize:0};	}	//supportoftheAPI?	if(perf.memory.totalJSHeapSize===0){		console.warn('totalJSHeapSize===0...performance.memoryisonlyavailableinChrome.')	}	//TODO,addasanitychecktoseeifvaluesarebucketed.	//Ifso,remindusertoadoptthe--enable-precise-memory-infoflag.	//open-a"/Applications/GoogleChrome.app"--args--enable-precise-memory-info	varlastTime	=Date.now();	varlastUsedHeap=perf.memory.usedJSHeapSize;	return{		domElement:container,		update:function(){			//refreshonly30timepersecond			if(Date.now()-lastTime<1000/30)	return;			lastTime	=Date.now()			vardelta	=perf.memory.usedJSHeapSize-lastUsedHeap;			lastUsedHeap	=perf.memory.usedJSHeapSize;			varcolor	=delta<0?'#830':'#131';			varms	=perf.memory.usedJSHeapSize;			msMin	=Math.min(msMin,ms);			msMax	=Math.max(msMax,ms);			msText.textContent="Mem:"+bytesToSize(ms,2);			varnormValue	=ms/(30*1024*1024);			varheight	=Math.min(30,30-normValue*30);			updateGraph(msGraph,height,color);			functionbytesToSize(bytes,nFractDigit){				varsizes=['Bytes','KB','MB','GB','TB'];				if(bytes==0)return'n/a';				nFractDigit	=nFractDigit!==undefined?nFractDigit:0;				varprecision	=Math.pow(10,nFractDigit);				vari		=Math.floor(Math.log(bytes)/Math.log(1024));				returnMath.round(bytes*precision/Math.pow(1024,i))/precision+''+sizes[i];			};		}	}};