<!DOCTYPEhtml><htmllang="en"><head><title>vue.jsversion</title><scriptsrc="https://cdn.jsdelivr.net/stats.js/r11/stats.min.js"></script><scriptsrc="../../dist/vue.min.js"></script><style>html,body{height:100%;width:100%;padding:0;margin:0;}svg{width:800px;height:600px;}</style></head><body><h1>Animating1000SVGdots</h1><divid="app"><p><button@click="toggleOptimization">{{optimized?'disable':'enable'}}optimization(Object.freeze)</button></p><svg><circlev-for='pointinmodel.points':cx='point.x':cy='point.y'r='2px'fill='#FC309D'></circle></svg></div><scripttype="text/javascript"charset="utf-8">varstats=newStats()stats.setMode(0)stats.domElement.style.position='absolute'stats.domElement.style.right='0px'stats.domElement.style.top='0px'document.body.appendChild(stats.domElement)varWIDTH=800varHEIGHT=600newVue({el:'#app',data:{model:createModel(1000),optimized:false},created:function(){varself=thisrequestAnimationFrame(render)stats.begin()functionrender(){stats.end()stats.begin()requestAnimationFrame(render)self.model.step()if(self.optimized){self.$forceUpdate()}}},methods:{toggleOptimization:function(){this.model=this.optimized?createModel(1000):Object.freeze(createModel(1000))this.optimized=!this.optimized}}});functioncreateModel(count){varpoints=[]for(vari=0;i<count;++i){points.push({x:Math.random()*WIDTH,y:Math.random()*HEIGHT,vx:Math.random()*4-2,vy:Math.random()*4-2})}return{points:points,step:step}functionstep(){points.forEach(move)}functionmove(p){if(p.x>WIDTH||p.x<0)p.vx*=-1if(p.y>HEIGHT||p.y<0)p.vy*=-1p.y+=p.vyp.x+=p.vx}}</script></body></html>