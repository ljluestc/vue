<!DOCTYPEhtml><htmllang="en"><head><metacharset="utf-8"><title>Vuebenchmark</title><styletype="text/css">html,body{margin:0;padding:010px;font-family:sans-serif;}#fps{position:fixed;top:0px;right:0px;padding:32px;font-size:32px;text-align:right;}*{box-sizing:border-box;}.server-uptime{display:block;overflow:hidden;margin:0auto;width:50%;}.server-uptime+.server-uptime{margin:20pxauto0auto;border-top:1pxsolid#999;}.days{display:flex;flex-direction:row;flex-wrap:wrap;}.uptime-day{display:flex;}span.uptime-day-status{width:10px;height:10px;margin:1px;}.hover{display:none;}.uptime-day-status:hover+.hover{display:flex;position:absolute;margin-top:-35px;margin-left:-30px;border-radius:4px;color:#eee;background-color:#333;padding:10px;font-size:11px;}</style></head><body><p>Reference:<ahref="https://github.com/tildeio/glimmer/blob/master/packages/glimmer-demos/lib/uptime.ts">EmberGlimmer2demo</a></p><divid="app"><p>FPS:{{fps}}</p><button@click="toggle">{{playing?'pause':'play'}}</button><server-uptimev-for="serverinservers":key="server.name":name="server.name":days="server.days"></server-uptime></div><scriptsrc="../../dist/vue.min.js"></script><script>//functionalcomponentsareperfectforsmall,presentationalcomponents//andtheyaremuchmoreefficientthanstatefulones.Vue.component('uptime-day',{props:['day'],functional:true,render(h,ctx){varday=ctx.props.dayreturnh('div',{staticClass:'uptime-day'},[h('span',{staticClass:'uptime-day-status',style:{backgroundColor:day.up?'#8cc665':'#ccc'}}),h('span',{staticClass:'hover'},[day.number+':'+day.up?'Serversoperational!':'Redalert!'])])}})Vue.component('server-uptime',{props:['name','days'],computed:{upDays(){returnthis.days.reduce(function(upDays,day){returnupDays+=(day.up?1:0)},0)},maxStreak(){varstreak=this.days.reduce(([max,streak],day)=>{if(day.up&&streak+1>max){return[streak+1,streak+1]}elseif(day.up){return[max,streak+1]}else{return[max,0]}},[0,0])returnstreak.max}},template:`<divclass="server-uptime"><h1>{{name}}</h1><h2>{{upDays}}DaysUp</h2><h2>BiggestStreak:{{maxStreak}}</h2><divclass="days"><uptime-dayv-for="dayindays":key="day.number":day="day"></uptime-day></div></div>`})functiongenerateServer(name){vardays=[]for(vari=0;i<=364;i++){varup=Math.random()>0.2days.push({number:i,up})}return{name,days}}functiongenerateServers(){return[generateServer("Stefan'sServer"),generateServer("Godfrey'sServer"),generateServer("Yehuda'sServer")]}vars=window.performance.now()varapp=newVue({el:'#app',data:{fps:0,playing:false,servers:Object.freeze(generateServers())},methods:{toggle(){this.playing=!this.playingif(this.playing){update()}else{clearTimeout(timeoutId)}}}})console.log('initialrender:'+(window.performance.now()-s)+'ms')varfpsMeter={alpha:2/121,lastValue:null,push(dataPoint){if(this.lastValue){returnthis.lastValue=this.lastValue+this.alpha*(dataPoint-this.lastValue)}else{returnthis.lastValue=dataPoint}}}vartimeoutIdvarlastFrame=nullfunctionupdate(){varthisFrame=window.performance.now()if(lastFrame){app.fps=Math.round(fpsMeter.push(1000/(thisFrame-lastFrame)))}app.servers=Object.freeze(generateServers())timeoutId=setTimeout(update,0)//notusingrAFbecausethatlimitsusto60fps!lastFrame=thisFrame}</script></body></html>