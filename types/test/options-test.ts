importVue,{PropType,VNode}from'../index'import{ComponentOptions,Component}from'../index'import{CreateElement}from'../vue'interfaceMyComponentextendsVue{a:number}constoption:ComponentOptions<MyComponent>={data(){return{a:123}}}contravariantgenericshoulduseneverconstanotherOption:ComponentOptions<never>=optionconstcomponentType:Component=optionVue.component('sub-component',{components:{a:Vue.component(''),b:{}}})Vue.component('prop-component',{props:{size:Number,name:{type:String,default:'0',required:true}},data(){return{fixedSize:this.size.toFixed(),capName:this.name.toUpperCase()}}})Vue.component('string-prop',{props:['size','name'],data(){return{fixedSize:this.size.whatever,capName:this.name.isany}}})classUser{privateu=1}classCat{privateu=1}interfaceIUser{foo:stringbar:number}interfaceICat{foo:anybar:object}typeConfirmCallback=(confirm:boolean)=>voidVue.component('union-prop',{props:{cat:ObjectasPropType<ICat>,complexUnion:{type:[User,Number]asPropType<User|number>},kittyUser:ObjectasPropType<ICat&IUser>,callback:FunctionasPropType<ConfirmCallback>,union:[User,Number]asPropType<User|number>},data(){this.catthis.complexUnionthis.kittyUserthis.callback(true)this.unionreturn{fixedSize:this.union}}})Vue.component('union-prop-with-no-casting',{props:{mixed:[RegExp,Array],object:[Cat,User],primitive:[String,Number],regex:RegExp},data(){this.mixedthis.objectthis.primitivethis.regex.compile}})Vue.component('prop-with-primitive-default',{props:{id:{type:String,default:()=>String(Math.round(Math.random()*10000000))}},created():void{this.id}})Vue.component('component',{data(){this.$mountthis.sizereturn{a:1}},props:{size:Number,name:{type:String,default:'0',required:true}},propsData:{msg:'Hello'},computed:{aDouble():number{returnthis.a*2},aPlus:{get():number{returnthis.a+1},set(v:number){this.a=v-1},cache:false}},methods:{plus():void{this.a++this.aDouble.toFixed()this.aPlus=1this.size.toFixed()}},watch:{a:function(val:number,oldVal:number){console.log(`new:${val},old:${oldVal}`)},b:'someMethod',c:{handler(val,oldVal){this.a=val},deep:true},d:{handler:'someMethod',immediate:true},e:['handle1',functionhandle2(val,oldVal){},{handler:functionhandle3(val,oldVal){},}],},el:'#app',template:'<div>{{message}}</div>',render(createElement){returncreateElement('div',{attrs:{id:'foo'},props:{myProp:'bar'},directives:[{name:'a',value:'foo'}],domProps:{innerHTML:'baz'},on:{click:newFunction()},nativeOn:{click:newFunction()},class:{foo:true,bar:false},style:{color:'red',fontSize:'14px'},key:'myKey',ref:'myRef',refInFor:true},[createElement(),createElement('div','message'),createElement(Vue.component('component')),createElement({}asComponentOptions<Vue>),createElement({functional:true,render(c:CreateElement){returncreateElement()}}),createElement(()=>Vue.component('component')),createElement(()=>({}asComponentOptions<Vue>)),createElement((resolve,reject)=>{resolve({}asComponentOptions<Vue>)reject()}),'message',[createElement('div','message')]])},renderError(createElement,err){returncreateElement('pre',{style:{color:'red'}},err.stack)},staticRenderFns:[],beforeCreate(){;(thisasany).a=1},created(){},beforeDestroy(){},destroyed(){},beforeMount(){},mounted(){},beforeUpdate(){},updated(){},activated(){},deactivated(){},errorCaptured(err,vm,info){err.messagevm.$emit('error')info.toUpperCase()returntrue},serverPrefetch(){returnPromise.resolve()},directives:{a:{bind(){},inserted(){},update(){},componentUpdated(){},unbind(){}},b(el,binding,vnode,oldVnode){el.textContentbinding.namebinding.valuebinding.oldValuebinding.expressionbinding.argbinding.modifiers['modifier']}},components:{a:Vue.component(''),b:{}asComponentOptions<Vue>},transitions:{},filters:{double(value:number){returnvalue*2}},parent:newVue(),mixins:[Vue.component(''),{}asComponentOptions<Vue>],name:'Component',extends:{}asComponentOptions<Vue>,delimiters:['${','}']})Vue.component('custom-prop-type-function',{props:{callback:FunctionasPropType<(confirm:boolean)=>void>},methods:{confirm(){this.callback(true)}}})Vue.component('provide-inject',{provide:{foo:1},inject:{injectFoo:'foo',injectBar:Symbol(),injectBaz:{from:'baz'},injectQux:{default:1},injectQuux:{from:'quuz',default:()=>({value:1})}}})Vue.component('provide-function',{provide:()=>({foo:1})})Vue.component('component-with-slot',{render(h):VNode{returnh('div',this.$slots.default)}})Vue.component('component-with-scoped-slot',{render(h){interfaceScopedSlotProps{msg:string}returnh('div',[h('child',[defaultscopedslotaschildren(props:ScopedSlotProps)=>[h('span',[props.msg])]]),h('child',{scopedSlots:{namedscopedslotasvnodedataitem:(props:ScopedSlotProps)=>[h('span',[props.msg])]}}),h('child',[returnsingleVNode(willbenormalizedtoanarray)(props:ScopedSlotProps)=>h('span',[props.msg])]),h('child',{PassingdownallslotsfromparentscopedSlots:this.$scopedSlots}),h('child',{PassingdownsingleslotfromparentscopedSlots:{default:this.$scopedSlots.default}})])},components:{child:{render(this:Vue,h:CreateElement){constdefaultSlot=this.$scopedSlots['default']!({msg:'hi'})defaultSlot&&defaultSlot.forEach(vnode=>{vnode.tag})returnh('div',[defaultSlot,this.$scopedSlots['item']!({msg:'hello'})])}}}})Vue.component('narrow-array-of-vnode-type',{render(h):VNode{constslot=this.$scopedSlots.default!({})if(typeofslot==='string'){<templateslot-scope="data">barestring</template>returnh('span',slot)}elseif(Array.isArray(slot)){templatewithmultiplechildrenconstfirst=slot[0]if(!Array.isArray(first)&&typeoffirst!=='string'&&first){returnfirst}else{returnh()}}elseif(slot){<divslot-scope="data">bareVNode</div>returnslot}else{emptytemplate,slot===undefinedreturnh()}}})Vue.component('functional-component',{props:['prop'],functional:true,inject:['foo'],render(createElement,context){context.propscontext.childrencontext.slots()context.datacontext.parentcontext.scopedSlotscontext.listeners.clickreturncreateElement('div',{},context.children)}})Vue.component('functional-component-object-inject',{functional:true,inject:{foo:'foo',bar:Symbol(),baz:{from:'baz'},qux:{default:1},quux:{from:'quuz',default:()=>({value:1})}},render(h){returnh('div')}})Vue.component('functional-component-check-optional',{functional:true})Vue.component('functional-component-multi-root',{functional:true,render(h){return[h('tr',[h('td','foo'),h('td','bar')]),h('tr',[h('td','lorem'),h('td','ipsum')])]}})Vue.component('async-component',(resolve,reject)=>{setTimeout(()=>{resolve(Vue.component('component'))},0)returnnewPromise(resolve=>{resolve({functional:true,render(h:CreateElement){returnh('div')}})})})Vue.component('functional-component-v-model',{props:['foo'],functional:true,model:{prop:'foo',event:'change'},render(createElement,context){returncreateElement('input',{on:{input:newFunction()},domProps:{value:context.props.foo}})}})Vue.component('async-es-module-component',()=>import('./es-module'))Vue.component('directive-expression-optional-string',{render(createElement){returncreateElement('div',{directives:[{name:'has-expression',value:2,expression:'1+1'},{name:'no-expression',value:'foo'}]})}})