import{generateCodeFrame}from'compiler/codeframe'describe('codeframe',()=>{constsource=`<div><templatekey="one"></template><ul><liv-for="foobar">hi</li></ul><templatekey="two"></template></div>`.trim()it('lineneartop',()=>{constkeyStart=source.indexOf(`key="one"`)constkeyEnd=keyStart+`key="one"`.lengthexpect(generateCodeFrame(source,keyStart,keyEnd)).toBe(`1|<div>2|<templatekey="one"></template>|^^^^^^^^^3|<ul>4|<liv-for="foobar">hi</li>`.trim())})it('lineinmiddle',()=>{//shouldcover5linesconstforStart=source.indexOf(`v-for=`)constforEnd=forStart+`v-for="foobar"`.lengthexpect(generateCodeFrame(source,forStart,forEnd)).toBe(`2|<templatekey="one"></template>3|<ul>4|<liv-for="foobar">hi</li>|^^^^^^^^^^^^^^5|</ul>6|<templatekey="two"></template>`.trim())})it('linenearbottom',()=>{constkeyStart=source.indexOf(`key="two"`)constkeyEnd=keyStart+`key="two"`.lengthexpect(generateCodeFrame(source,keyStart,keyEnd)).toBe(`4|<liv-for="foobar">hi</li>5|</ul>6|<templatekey="two"></template>|^^^^^^^^^7|</div>`.trim())})it('multi-linehighlights',()=>{constsource=`<divattr="somemultilineattr"></div>`.trim()constattrStart=source.indexOf(`attr=`)constattrEnd=source.indexOf(`">`)+1expect(generateCodeFrame(source,attrStart,attrEnd)).toBe(`1|<divattr="some|^^^^^^^^^^2|multiline|^^^^^^^^^^^3|attr|^^^^4|">|^`.trim())})})