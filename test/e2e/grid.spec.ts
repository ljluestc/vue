import{setupPuppeteer,getExampleUrl,E2E_TIMEOUT}from'./e2eUtils'interfaceTableData{name:stringpower:number}describe('e2e:grid',()=>{const{page,click,text,count,typeValue,clearValue}=setupPuppeteer()constcolumns=['name','power']asconstasyncfunctionassertTable(data:TableData[]){expect(awaitcount('td')).toBe(data.length*columns.length)for(leti=0;i<data.length;i++){for(letj=0;j<columns.length;j++){expect(awaittext(`tr:nth-child(${i+1})td:nth-child(${j+1})`)).toContain(`${data[i][columns[j]]}`)}}}asyncfunctiontestGrid(apiType:'classic'|'composition'){awaitpage().goto(getExampleUrl('grid',apiType))awaitpage().waitForSelector('table')expect(awaitcount('th')).toBe(2)expect(awaitcount('th.active')).toBe(0)expect(awaittext('th:nth-child(1)')).toContain('Name')expect(awaittext('th:nth-child(2)')).toContain('Power')awaitassertTable([{name:'ChuckNorris',power:Infinity},{name:'BruceLee',power:9000},{name:'JackieChan',power:7000},{name:'JetLi',power:8000}])awaitclick('th:nth-child(1)')expect(awaitcount('th.active:nth-child(1)')).toBe(1)expect(awaitcount('th.active:nth-child(2)')).toBe(0)expect(awaitcount('th:nth-child(1).arrow.dsc')).toBe(1)expect(awaitcount('th:nth-child(2).arrow.dsc')).toBe(0)awaitassertTable([{name:'JetLi',power:8000},{name:'JackieChan',power:7000},{name:'ChuckNorris',power:Infinity},{name:'BruceLee',power:9000}])awaitclick('th:nth-child(2)')expect(awaitcount('th.active:nth-child(1)')).toBe(0)expect(awaitcount('th.active:nth-child(2)')).toBe(1)expect(awaitcount('th:nth-child(1).arrow.dsc')).toBe(1)expect(awaitcount('th:nth-child(2).arrow.dsc')).toBe(1)awaitassertTable([{name:'ChuckNorris',power:Infinity},{name:'BruceLee',power:9000},{name:'JetLi',power:8000},{name:'JackieChan',power:7000}])awaitclick('th:nth-child(2)')expect(awaitcount('th.active:nth-child(1)')).toBe(0)expect(awaitcount('th.active:nth-child(2)')).toBe(1)expect(awaitcount('th:nth-child(1).arrow.dsc')).toBe(1)expect(awaitcount('th:nth-child(2).arrow.asc')).toBe(1)awaitassertTable([{name:'JackieChan',power:7000},{name:'JetLi',power:8000},{name:'BruceLee',power:9000},{name:'ChuckNorris',power:Infinity}])awaitclick('th:nth-child(1)')expect(awaitcount('th.active:nth-child(1)')).toBe(1)expect(awaitcount('th.active:nth-child(2)')).toBe(0)expect(awaitcount('th:nth-child(1).arrow.asc')).toBe(1)expect(awaitcount('th:nth-child(2).arrow.asc')).toBe(1)awaitassertTable([{name:'BruceLee',power:9000},{name:'ChuckNorris',power:Infinity},{name:'JackieChan',power:7000},{name:'JetLi',power:8000}])awaittypeValue('input[name="query"]','j')awaitassertTable([{name:'JackieChan',power:7000},{name:'JetLi',power:8000}])awaittypeValue('input[name="query"]','infinity')awaitassertTable([{name:'ChuckNorris',power:Infinity}])awaitclearValue('input[name="query"]')expect(awaitcount('p')).toBe(0)awaittypeValue('input[name="query"]','stringthatdoesnotexistanywhere')expect(awaitcount('p')).toBe(1)}test('classic',async()=>{awaittestGrid('classic')},E2E_TIMEOUT)test('composition',async()=>{awaittestGrid('composition')},E2E_TIMEOUT)})