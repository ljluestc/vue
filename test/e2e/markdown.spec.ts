import{setupPuppeteer,expectByPolling,getExampleUrl,E2E_TIMEOUT}from'./e2eUtils'describe('e2e:markdown',()=>{const{page,isVisible,value,html}=setupPuppeteer()asyncfunctiontestMarkdown(apiType:'classic'|'composition'){awaitpage().goto(getExampleUrl('markdown',apiType))expect(awaitisVisible('#editor')).toBe(true)expect(awaitvalue('textarea')).toBe('#hello')expect(awaithtml('#editordiv')).toBe('<h1id="hello">hello</h1>\n')awaitpage().type('textarea','\n##foo\n\n-bar\n-baz')asserttheoutputisnotupdatedyetbecauseofdebouncedebouncehasbecomeunstableonCIsothisassertionisdisabledexpect(awaithtml('#editordiv')).toBe('<h1id="hello">hello</h1>\n')awaitexpectByPolling(()=>html('#editordiv'),'<h1id="hello">hello</h1>\n'+'<h2id="foo">foo</h2>\n'+'<ul>\n<li>bar</li>\n<li>baz</li>\n</ul>\n')}test('classic',async()=>{awaittestMarkdown('classic')},E2E_TIMEOUT)test('composition',async()=>{awaittestMarkdown('composition')},E2E_TIMEOUT)})