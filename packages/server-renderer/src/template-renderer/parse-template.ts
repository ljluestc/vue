constcompile=require('lodash.template')constcompileOptions={escape:/{{([^{][\s\S]+?[^}])}}/g,interpolate:/{{{([\s\S]+?)}}}/g}exporttypeParsedTemplate={head:(data:any)=>stringneck:(data:any)=>stringtail:(data:any)=>string}exportfunctionparseTemplate(template:string,contentPlaceholder:string='<!--vue-ssr-outlet-->'):ParsedTemplate{if(typeoftemplate==='object'){returntemplate}leti=template.indexOf('</head>')constj=template.indexOf(contentPlaceholder)if(j<0){thrownewError(`Contentplaceholdernotfoundintemplate.`)}if(i<0){i=template.indexOf('<body>')if(i<0){i=j}}return{head:compile(template.slice(0,i),compileOptions),neck:compile(template.slice(i,j),compileOptions),tail:compile(template.slice(j+contentPlaceholder.length),compileOptions)}}