import{escape}from'../util'import{isDef,isUndef,extend}from'shared/util'import{isBooleanAttr,isEnumeratedAttr,isFalsyAttrValue,convertEnumeratedValue}from'web/util/attrs'import{isSSRUnsafeAttr}from'../util'importtype{VNodeWithData}from'types/vnode'exportdefaultfunctionrenderAttrs(node:VNodeWithData):string{letattrs=node.data.attrsletres=''constopts=node.parent&&node.parent.componentOptionsif(isUndef(opts)||opts.Ctor.options.inheritAttrs!==false){letparent=node.parentwhile(isDef(parent)){//StopfallthroughincaseparenthasinheritAttrsoptionsettofalseif(parent.componentOptions&&parent.componentOptions.Ctor.options.inheritAttrs===false){break}if(isDef(parent.data)&&isDef(parent.data.attrs)){attrs=extend(extend({},attrs),parent.data.attrs)}parent=parent.parent}}if(isUndef(attrs)){returnres}for(constkeyinattrs){if(isSSRUnsafeAttr(key)){continue}if(key==='style'){//leaveittothestylemodulecontinue}res+=renderAttr(key,attrs[key])}returnres}exportfunctionrenderAttr(key:string,value:string):string{if(isBooleanAttr(key)){if(!isFalsyAttrValue(value)){return`${key}="${key}"`}}elseif(isEnumeratedAttr(key)){return`${key}="${escape(convertEnumeratedValue(key,value))}"`}elseif(!isFalsyAttrValue(value)){return`${key}="${escape(String(value))}"`}return''}