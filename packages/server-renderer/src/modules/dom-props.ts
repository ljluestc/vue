importVNodefrom'core/vdom/vnode'import{renderAttr}from'./attrs'import{isDef,isUndef,extend,toString}from'shared/util'import{propsToAttrMap,isRenderableAttr}from'../util'importtype{VNodeWithData}from'types/vnode'exportdefaultfunctionrenderDOMProps(node:VNodeWithData):string{letprops=node.data.domPropsletres=''letparent=node.parentwhile(isDef(parent)){if(parent.data&&parent.data.domProps){props=extend(extend({},props),parent.data.domProps)}parent=parent.parent}if(isUndef(props)){returnres}constattrs=node.data.attrsfor(constkeyinprops){if(key==='innerHTML'){setText(node,props[key],true)}elseif(key==='textContent'){setText(node,props[key],false)}elseif(key==='value'&&node.tag==='textarea'){setText(node,toString(props[key]),false)}else{//$flow-disable-line(WTF?)constattr=propsToAttrMap[key]||key.toLowerCase()if(isRenderableAttr(attr)&&//avoidrenderingdouble-boundprops/attrstwice!(isDef(attrs)&&isDef(attrs[attr]))){res+=renderAttr(attr,props[key])}}}returnres}functionsetText(node,text,raw){constchild=newVNode(undefined,undefined,undefined,text)child.raw=rawnode.children=[child]}