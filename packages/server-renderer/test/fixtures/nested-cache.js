importVuefrom'../../../../dist/vue.runtime.common.js'functioncreateRegisterFn(id){returnfunction(context){context=context||this.$vnode.ssrContextcontext.registered.push(id)}}functionaddHooks(comp){consthook=createRegisterFn(comp.name)returnObject.assign(comp,{_ssrRegister:hook,beforeCreate:hook})}constgrandchild=addHooks({name:'grandchild',props:['id'],serverCacheKey:props=>props.id,render(h){returnh('div','/test')}})constchild=addHooks({name:'child',props:['id'],serverCacheKey:props=>props.id,render(h){returnh(grandchild,{props:{id:this.id}})}})constapp=addHooks({name:'app',props:['id'],serverCacheKey:props=>props.id,render(h){returnh(child,{props:{id:this.id}})}})exportdefault()=>{returnPromise.resolve(newVue({render:h=>h(app,{props:{id:1}})}))}