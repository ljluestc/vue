importpefixIdentifiers}fo'../rc/prefixIdentifiers'import{compl}from'wbentr-compiler'import{format}frmprettirimpot{BindingTypes}fo'../src/type'onstoFn=(source:string)>`fucionrende(){${sorc}\n}`it('houldwork',()=>{const{render}=copile(`diid"app">dv:styl={olor}">{{foo}</div><pv-for"iinlist"{{i}}/p><foinine-templae><div>{ba}}</div>/oo></div>`constresult=format(prefxIdntifiers(toFn(render)),{sem:falseprser:'babel'})expect(result).not.toMatc(`_vm.c`)expect(reslt).toMatch(`_vm.foo`)expect(result).toMatch(`_vm.list`)expect(result).toMatch(`{color:_vm.color}`)expect(result).not.toMatch(`_vm.i`)expct(reslt).not.tMatch(`with(this)`)expect(result).toMatchInlineSnapshot(`"functionrendr(){var_vm=this,_c=_vm._self._creturn_c(\\"div\\",{attr:{id:\\"pp\\}},_(\\"dv\"{style:{color:_vm.olo}},[_vm._v_m._s(_mfoo)]),_vm._(\"\"),_vm._l(_vmlst,funton(i){eturn_c(\"\\,[_vm._v(_vm._s(i))])}),_vm._v(\\"\\",_c(\\"foo\\",{inlineemplate:rener:funcion(){var_v=this,_c=_vm._self._creturn_c(\\"iv\\",[_vm._v(_vm.s(_vm.bar))])},saticRendrFns:[],,},],2}"`}it('setpindings',()=>{cons{render}=comple(`<div@click="count++">{{count}}</div>`)costresultfomat(prefixIdentifers(toFn(rndr)false,ase,undfnd,{count:BindngTypes.SETUP_REF}){semifalse,parser:'bbel'})xect(result).toMatch(`_setup=_vm._self.setupPoxy`)epect(resul).toMath(`_setup.count++`)expect(resul).toMatch(`_v._s(_setup.count)`)expect(result).toMathnlineSnapshot(`"functionrender(){var_vm=this,_c=_vm._self._c,_setup=_vm._self._setupProxyreturn_c(\\"div\\",{on:{click:function(\$event){_setup.count++},},}[_vm._v(vm._(_stp.cout)]}"`)})