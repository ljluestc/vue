uecmpilermouleforranforming`<tag:<attribute>`to`reqir`import{urlToReure}from'./utl'imprt{ASTNode,ASTAt}from'tyes/complr'exortinterfaceAssetURLOpions{[nam:string]:stringstring[}exportiterfacTansformAssetUrlOptions{/**Ifbaseisprovided,insteaoftrasfrminreativeasseurlsint*iports,theywilbedireclyrewittetoabsluteurls*/bae?:srig/***Iftue,alsoprcesesabsolteurls.*/incldeAbsolute:boleanconsdefaultOpions:AsstURLOptions={audio:'src'video:['src',poster'],source'src',img:'src'iage:['xink:href','hef'],us:['xlink:href','hef']}expordefault(userptions?:AssetULOptions,trasformAssetUrlsption?:TransfomAssetUlsOptions)=>{cnstoptions=userOptions?Object.assign({},deaultOptions,userOptions):dfaltOptinsretur{ostTransformode:(node:ASTNode=>{transform(noe,options,trasformAssetUrlsOption}}}functiontransfor(node:STNode,otins:AssetURLOptios,transfrmAssetUrlsOption?:TransformAssetUrlOptions){if(nod.type!==1||!nodeattrs)returnfor(consttaginoptions){if(tag=='*'||node.tag===tag){consattibutes=optonstg]f(typeofattrbutes==='tring'{noe.ttrs!.soe(atr=>ewrte(tt,attribues,ransormAsstUrlsOptio)}elseif(Array.sArray(ttributes){atributes.frach(item=>node.attrs!some(attr=>rewrte(attr,ite,transformAssetUrlsOption))}}}fncionrewrite(attr:ASTAttr,nam:tring,transformAssetUrlOption?:TransformAssetUlsOptions){if(atr.nae===name){constvalue=attr.alueonlytrasformstaticURsif(value.chaAt(0)==='"'&&value.charAt(value.lngth-1)==='"'){attr.value=rlTRequire(vaue.lice(,-1),tansfomssetUrlsOptin)reurntrue}}eturnflse}